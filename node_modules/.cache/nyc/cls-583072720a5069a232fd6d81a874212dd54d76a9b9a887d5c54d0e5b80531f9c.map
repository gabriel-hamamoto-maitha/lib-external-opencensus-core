{"version":3,"file":"/Users/usermaitha/trademaster/libs/lib-external-opencensus-node/src/internal/cls.ts","sources":["/Users/usermaitha/trademaster/libs/lib-external-opencensus-node/src/internal/cls.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;;AAMH,iCAAiC;AAKjC,MAAM,aAAa,GAAY,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC,IAAI;AAC7E,0CAA0C;AAE1C,MAAM,GAAG,GAAe,aAAa;IACnC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC;IACrB,CAAC,CAAC,OAAO,CAAC,4BAA4B,CAAC,CAAC;AAE1C,MAAM,eAAe,GAAG,eAAe,CAAC;AAExC;;;;;GAKG;AACU,QAAA,sBAAsB,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAE5D,SAAgB,eAAe;IAC7B,OAAO,GAAG,CAAC,eAAe,CAAC,eAAe,CAAC,CAAC;AAC9C,CAAC;AAFD,0CAEC;AAED,SAAgB,gBAAgB;IAC9B,GAAG,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC;AACxC,CAAC;AAFD,4CAEC;AAED,SAAgB,YAAY;IAC1B,OAAO,GAAG,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;AAC3C,CAAC;AAFD,oCAEC;AAEY,QAAA,cAAc,GAAG,eAAe,EAAE,CAAC","sourcesContent":["/**\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Original file from Stackdriver Trace Agent for Node.js\n// https://github.com/GoogleCloudPlatform/cloud-trace-nodejs\n\nimport * as CLS from 'continuation-local-storage';\nimport * as semver from 'semver';\n\nexport type Namespace = CLS.Namespace;\nexport type Func<T> = CLS.Func<T>;\n\nconst useAsyncHooks: boolean = semver.satisfies(process.version, '>=8'); //&&\n// !!process.env.GCLOUD_TRACE_NEW_CONTEXT;\n\nconst cls: typeof CLS = useAsyncHooks\n  ? require('./cls-ah')\n  : require('continuation-local-storage');\n\nconst TRACE_NAMESPACE = 'opencensus.io';\n\n/**\n * Stack traces are captured when a root span is started. Because the stack\n * trace height varies on the context propagation mechanism, to keep published\n * stack traces uniform we need to remove the top-most frames when using the\n * c-l-s module. Keep track of this number here.\n */\nexport const ROOT_SPAN_STACK_OFFSET = useAsyncHooks ? 0 : 2;\n\nexport function createNamespace(): CLS.Namespace {\n  return cls.createNamespace(TRACE_NAMESPACE);\n}\n\nexport function destroyNamespace(): void {\n  cls.destroyNamespace(TRACE_NAMESPACE);\n}\n\nexport function getNamespace(): CLS.Namespace {\n  return cls.getNamespace(TRACE_NAMESPACE);\n}\n\nexport const contextManager = createNamespace();\n"]}